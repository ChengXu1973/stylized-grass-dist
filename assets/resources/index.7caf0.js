System.register("chunks:///_virtual/control.ts",["./rollupPluginModLoBabelHelpers.js","cc","./grass-near.ts"],(function(t){var e,i,o,r,n,s,a,l,h,u,c,d,p,f,_,y,m,b,g,D,v,T,x,P,w,R;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.v3,l=t.v2,h=t.quat,u=t.Node,c=t.Camera,d=t.CCFloat,p=t.Texture2D,f=t.SkeletalAnimation,_=t.input,y=t.Input,m=t.sys,b=t.Vec3,g=t.Quat,D=t.gfx,v=t.director,T=t.misc,x=t.NodeSpace,P=t.KeyCode,w=t.Component},function(t){R=t.GrassNear}],execute:function(){var k,z,E,O,F,N,A,H,L,S,U,W,I,C,G,M,Y,K,X,B,V,j,q,Q,Z;n._RF.push({},"66344o5UyNGp4Ik3xtOe/pd","control",void 0);var J,$,tt,et,it,ot,rt,nt,st,at,lt,ht,ut,ct,dt,pt,ft,_t,yt,mt,bt,gt=s.ccclass,Dt=s.property,vt=function(t){return t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=4]="LEFT",t[t.RIGHT=8]="RIGHT",t}(vt||{}),Tt=a(),xt=l(),Pt=l(),wt=h(),Rt=h(),kt="Spin",zt="Fly";t("Control",(k=gt("Control"),z=Dt(u),E=Dt(c),O=Dt({type:d,min:1}),F=Dt({type:d,min:0}),N=Dt({type:d,min:0}),A=Dt({type:d,min:0}),H=Dt(p),L=Dt({type:d,min:0}),S=Dt({type:d,min:0}),U=Dt(R),W=Dt(f),k((G=e((C=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,o(e,"focus",G,r(e)),o(e,"cam",M,r(e)),o(e,"camDistance",Y,r(e)),o(e,"speedMove",K,r(e)),o(e,"rateX",X,r(e)),o(e,"rateY",B,r(e)),o(e,"noise",V,r(e)),o(e,"terrainScale",j,r(e)),o(e,"terrainHeight",q,r(e)),o(e,"grassNear",Q,r(e)),o(e,"bird",Z,r(e)),e._moveDir=0,e._lookDir=0,e._pixels=void 0,e}i(e,t);var n=e.prototype;return n.onLoad=function(){this._copyTexture(),_.on(y.EventType.TOUCH_MOVE,this._handleTouch,this),_.on(y.EventType.KEY_DOWN,this._handleKey,this),_.on(y.EventType.KEY_UP,this._handleKey,this),et=1/this.terrainScale},n.start=function(){this._updatePosition(),this._updateLook(),this.bird.play(kt)},n.update=function(){m.isMobile&&(this._moveDir=_.getTouchCount()>0?vt.UP:0),this._moveDir&&this._updatePosition(),this._lookDir&&this._updateLook(),this._updateChickenAnim()},n._updateChickenAnim=function(){this._moveDir?(this.bird.getState(zt).isPlaying||this.bird.crossFade(zt,.2),Tt.set(0,0,0),this._moveDir&vt.UP&&Tt.add(b.FORWARD),this._moveDir&vt.DOWN&&Tt.subtract(b.FORWARD),this._moveDir&vt.LEFT&&Tt.subtract(b.RIGHT),this._moveDir&vt.RIGHT&&Tt.add(b.RIGHT),g.fromViewUp(Rt,Tt.normalize(),b.UP),this.bird.node.setRotation(Rt),this.bird.getState(zt).isPlaying||this.bird.crossFade(zt,.2)):this.bird.getState(kt).isPlaying||this.bird.crossFade(kt,.2)},n._copyTexture=function(){it=this.noise.width,ot=this.noise.height,this._pixels=new Uint8Array(it*ot*4);var t=new D.BufferTextureCopy;t.texOffset.x=0,t.texOffset.y=0,t.texExtent.width=it,t.texExtent.height=ot,v.root.device.copyTextureToBuffers(this.noise.getGFXTexture(),[this._pixels],[t])},n._updatePosition=function(){var t;Tt.set(0,0,0),this._moveDir&vt.UP&&Tt.add(this.node.forward),this._moveDir&vt.DOWN&&Tt.subtract(this.node.forward),this._moveDir&vt.LEFT&&Tt.subtract(this.node.right),this._moveDir&vt.RIGHT&&Tt.add(this.node.right),Tt.normalize(),Tt.multiplyScalar(this.speedMove).add(this.node.position),Tt.x=((Tt.x+et)%(2*et)+2*et)%(2*et)-et,Tt.z=((Tt.z+et)%(2*et)+2*et)%(2*et)-et,this.node.setPosition(Tt),this._updateHeight(),null==(t=this.grassNear)||t.updateUserPos(this.node.worldPositionX,this.node.worldPositionZ)},n._updateLook=function(){Tt.set(this.cam.node.position).subtract(this.focus.position).add3f(0,this._lookDir,0).normalize().multiplyScalar(this.camDistance).add(this.focus.position),Tt.y=Math.max(.8*this.focus.position.y,Tt.y),this.cam.node.setPosition(Tt),this.cam.node.lookAt(this.focus.worldPosition),this._lookDir=0},n._handleTouch=function(t){t.getPreviousLocation(xt),t.getLocation(Pt),$=Pt.x-xt.x,wt.set(g.IDENTITY),g.fromAxisAngle(Rt,b.UNIT_Y,T.degreesToRadians($*this.rateX)),g.multiply(wt,wt,Rt),this.node.rotate(wt,x.WORLD),tt=this.rateY*(Pt.y-xt.y),this._lookDir+=tt},n._handleKey=function(t){switch(J=0,t.keyCode){case P.ARROW_UP:case P.KEY_W:J=vt.UP;break;case P.ARROW_DOWN:case P.KEY_S:J=vt.DOWN;break;case P.ARROW_LEFT:case P.KEY_A:J=vt.LEFT;break;case P.ARROW_RIGHT:case P.KEY_D:J=vt.RIGHT}"keydown"===t.type?this._moveDir|=J:this._moveDir&=~J},n._updateHeight=function(){rt=this.node.worldPosition.x*this.terrainScale,nt=this.node.worldPosition.z*this.terrainScale,rt-=.5/it,nt-=.5/ot,rt-=Math.floor(rt),nt-=Math.floor(nt),st=rt*it,at=nt*ot,lt=Math.floor(st),ht=Math.floor(at),ut=lt+1,ct=ht+1,lt=(lt+it)%it,ht=(ht+ot)%ot,ut=(ut+it)%it,ct=(ct+ot)%ot,ft=this._getPixel(lt,ht,0),_t=this._getPixel(ut,ht,0),yt=this._getPixel(lt,ct,0),mt=this._getPixel(ut,ct,0),bt=ft*((1-(dt=st-lt))*(1-(pt=at-ht)))+_t*(dt*(1-pt))+yt*((1-dt)*pt)+mt*(dt*pt),Tt.set(this.node.position),Tt.y=this.terrainHeight*bt/255,this.node.setPosition(Tt)},n._getPixel=function(t,e,i){return void 0===i&&(i=0),this._pixels[4*(e*it+t)+i]},e}(w)).prototype,"focus",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(C.prototype,"cam",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(C.prototype,"camDistance",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),K=e(C.prototype,"speedMove",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),X=e(C.prototype,"rateX",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),B=e(C.prototype,"rateY",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.02}}),V=e(C.prototype,"noise",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(C.prototype,"terrainScale",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4e-4}}),q=e(C.prototype,"terrainHeight",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),Q=e(C.prototype,"grassNear",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=e(C.prototype,"bird",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=C))||I));n._RF.pop()}}}));

System.register("chunks:///_virtual/grass-far.ts",["./rollupPluginModLoBabelHelpers.js","cc","./grass-base.ts","./grass-animation-module.ts","./grass-spawner-module.ts"],(function(r){var e,t,n,i,a,o,s,l,u,c;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,n=r.initializerDefineProperty,i=r.assertThisInitialized},function(r){a=r.cclegacy,o=r._decorator,s=r.CCFloat},function(r){l=r.GrassBase},function(r){u=r.GrassAnimationModule},function(r){c=r.GrassSpawnerModule}],execute:function(){var p,h,f,b,y,m,g,w,d,M,z,v,F,G,A,I,P,_,B,D;a._RF.push({},"644570N7hRLT7G9TNBQYoju","grass-far",void 0);var L=o.ccclass,R=o.property,S=0,T=0,j=(p=L("SampleInArc"),h=R({type:s,min:0}),f=R(s),b=R(s),y=R(s),p((w=e((g=function(){function r(){n(this,"density",w,this),n(this,"r1",d,this),n(this,"r2",M,this),n(this,"degree",z,this)}return r.prototype.sample=function(){for(var r=~~(Math.PI*this.degree/180*.5*(Math.pow(this.r2,2)-Math.pow(this.r1,2))*this.density),e=new Float32Array(3*r),t=new Float32Array(3*r),n=0;n<r;n++)S=2*(Math.random()-.5)*(Math.PI*this.degree/180),T=this.r1+Math.random()*(this.r2-this.r1),e[3*n+0]=T*Math.sin(S),e[3*n+1]=0,e[3*n+2]=-T*Math.cos(S),t[3*n+0]=0,t[3*n+1]=1,t[3*n+2]=0;return{positions:e,normals:t,count:r}},r}()).prototype,"density",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),d=e(g.prototype,"r1",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),M=e(g.prototype,"r2",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),z=e(g.prototype,"degree",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),m=g))||m);r("GrassFar",(v=L("GrassFar"),F=R(j),G=R(c),A=R(u),v((_=e((P=function(r){function e(){for(var e,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a))||this,n(e,"sampler",_,i(e)),n(e,"spawner",B,i(e)),n(e,"animation",D,i(e)),e}return t(e,r),e.prototype.onEnable=function(){r.prototype.onEnable.call(this),this.grow()},e}(l)).prototype,"sampler",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new j}}),B=e(P.prototype,"spawner",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),D=e(P.prototype,"animation",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),I=P))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/grass-near.ts",["./rollupPluginModLoBabelHelpers.js","cc","./grass-base.ts","./grass-animation-module.ts","./grass-spawner-module.ts"],(function(i){var t,n,e,s,r,o,a,u,h,l;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,s=i.assertThisInitialized},function(i){r=i.cclegacy,o=i._decorator,a=i.CCFloat},function(i){u=i.GrassBase},function(i){h=i.GrassAnimationModule},function(i){l=i.GrassSpawnerModule}],execute:function(){var p,c,f,w,d,m,y,b,z,v,_,g,M,S,R,F,G,A;r._RF.push({},"81a45+8KFJHiqu9tspF1IT2","grass-near",void 0);var P,D,I,B,C,E,H,L,N,T,U=o.ccclass,j=o.property,k=(p=U("SampleInGrid"),c=j({type:a,min:0}),f=j(a),w=j(a),p((y=t((m=function(){function i(){e(this,"density",y,this),e(this,"shownRadius",b,this),e(this,"unitSize",z,this),this._unit=void 0,this._shown=void 0}var t=i.prototype;return t.sample=function(){N=Math.pow(this.shownRadius,2);for(var i=~~(Math.pow(this.unitSize,2)*this.density),t=new Float32Array(3*i),n=new Float32Array(3*i),e=0;e<i;e++)t[3*e+0]=this.unitSize*(Math.random()-.5),t[3*e+1]=0,t[3*e+2]=this.unitSize*(Math.random()-.5),n[3*e+0]=0,n[3*e+1]=1,n[3*e+2]=0;this._unit={positions:t,normals:n,count:i};var s=Math.pow(Math.ceil(2*this.shownRadius/this.unitSize),2)*i;return this._shown={positions:new Float32Array(3*s),normals:new Float32Array(3*s),count:s},this.filter(0,0)},t.filter=function(i,t){T=0,H=Math.floor((i-this.shownRadius)/this.unitSize),C=Math.ceil((i+this.shownRadius)/this.unitSize),L=Math.floor((t-this.shownRadius)/this.unitSize),E=Math.ceil((t+this.shownRadius)/this.unitSize);for(var n=H;n<=C;n++)for(var e=L;e<=E;e++){I=n*this.unitSize,B=e*this.unitSize;for(var s=0;s<this._unit.count;s++)P=this._unit.positions[3*s+0]+I,D=this._unit.positions[3*s+2]+B,Math.pow(P-i,2)+Math.pow(D-t,2)<=N&&(this._shown.positions[3*T+0]=P,this._shown.positions[3*T+2]=D,this._shown.normals[3*T+1]=1,T++)}return this._shown.count=T,this._shown},i}()).prototype,"density",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 28}}),b=t(m.prototype,"shownRadius",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 35}}),z=t(m.prototype,"unitSize",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),d=m))||d);i("GrassNear",(v=U("GrassNear"),_=j(k),g=j(l),M=j(h),v((F=t((R=function(i){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=i.call.apply(i,[this].concat(r))||this,e(t,"sampler",F,s(t)),e(t,"spawner",G,s(t)),e(t,"animation",A,s(t)),t}n(t,i);var r=t.prototype;return r.onEnable=function(){i.prototype.onEnable.call(this),this.sampler.sample(),this.updateUserPos()},r.updateUserPos=function(i,t){if(void 0===i&&(i=0),void 0===t&&(t=0),this.enabled){var n=this.sampler.filter(i,t);this._models[0].updateGrass(n)}},t}(u)).prototype,"sampler",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new k}}),G=t(R.prototype,"spawner",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),A=t(R.prototype,"animation",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),S=R))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/grass1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./grass-base.ts","./grass-animation-module.ts","./grass-sampler-module.ts","./grass-spawner-module.ts"],(function(e){var r,n,t,a,i,s,o,l,u,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator},function(e){o=e.GrassBase},function(e){l=e.GrassAnimationModule},function(e){u=e.GrassSamplerModule},function(e){c=e.GrassSpawnerModule}],execute:function(){var p,f,m,g,b,d,w,y,h;i._RF.push({},"0758cfPfu5F7rSpfjTwhrpk","grass1",void 0);var v=s.ccclass,G=s.property;s.executeInEditMode,e("Grass1",(p=v("Grass1"),f=G(u),m=G(c),g=G(l),p((w=r((d=function(e){function r(){for(var r,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i))||this,t(r,"sampler",w,a(r)),t(r,"spawner",y,a(r)),t(r,"animation",h,a(r)),r}return n(r,e),r.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.grow()},r}(o)).prototype,"sampler",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),y=r(d.prototype,"spawner",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),h=r(d.prototype,"animation",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),b=d))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/grass2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./grass-base.ts","./grass-animation-module.ts","./grass-sampler-module.ts","./grass-spawner-module.ts"],(function(e){var r,n,t,a,i,o,s,l,u,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator},function(e){s=e.GrassBase},function(e){l=e.GrassAnimationModule},function(e){u=e.GrassSamplerModule},function(e){c=e.GrassSpawnerModule}],execute:function(){var p,f,g,m,d,b,w,y,h;i._RF.push({},"ce6dcPDFPtIGLxwPgMIou5a","grass2",void 0);var G=o.ccclass,v=o.property;o.executeInEditMode,e("Grass2",(p=G("Grass2"),f=v(u),g=v(c),m=v(l),p((w=r((b=function(e){function r(){for(var r,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i))||this,t(r,"sampler",w,a(r)),t(r,"spawner",y,a(r)),t(r,"animation",h,a(r)),r}return n(r,e),r.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.grow()},r}(s)).prototype,"sampler",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),y=r(b.prototype,"spawner",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),h=r(b.prototype,"animation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),d=b))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/menu.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,o,c,r;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,c=n.director,r=n.Component}],execute:function(){var u;t._RF.push({},"cac88eMIzxIbKdvhRpNn50U","menu",void 0);var i=o.ccclass;o.property,n("Menu",i("Menu")(u=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var o=t.prototype;return o.switchScene=function(n,e){c.loadScene("case"+e)},o.openLink=function(n,e){window.open(e,"_blank")},t}(r))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/resources",["./grass1.ts","./grass2.ts","./control.ts","./grass-far.ts","./grass-near.ts","./menu.ts","./spin.ts"],(function(){return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/spin.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,r,s,a,c,p,u,l,f,v,h,d,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.v2,c=e.quat,p=e.CCFloat,u=e.input,l=e.Input,f=e.Quat,v=e.Vec3,h=e.misc,d=e.NodeSpace,y=e.Component}],execute:function(){var m,_,g,T,b;r._RF.push({},"08fe33BmVtJ+ojlNVpwhko3","spin",void 0);var D=s.ccclass,E=s.property,C=a(),I=a(),L=c(),O=c();e("Spin",(m=D("Spin"),_=E(p),m((b=t((T=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"speed",b,o(t)),t}n(t,e);var r=t.prototype;return r.onEnable=function(){u.on(l.EventType.TOUCH_MOVE,this._move,this)},r.onDisable=function(){u.off(l.EventType.TOUCH_MOVE,this._move,this)},r._move=function(e){e.getPreviousLocation(C),e.getLocation(I),L.set(f.IDENTITY);var t=I.x-C.x;f.fromAxisAngle(O,v.UNIT_Y,h.degreesToRadians(t*this.speed)),f.multiply(L,L,O),this.node.rotate(L,d.WORLD)},t}(y)).prototype,"speed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),g=T))||g));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/resources', 'chunks:///_virtual/resources'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});